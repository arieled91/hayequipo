<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
>
<head>
  <title>Login </title>

  <script src="../static/js/jquery-3.3.1.min.js" th:src="@{../js/jquery-3.3.1.min.js}"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-indigo.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<header>
  <h3> </h3>
</header>
<div class="mdl-grid">
  <div class="mdl-layout-spacer"></div>

  <form th:action="@{auth/formRegistration}" method="post">
    <header>
      <h3>  </h3>
    </header>

    <div th:if="${param.emailError}" th:text="#{message.regMailError}"></div>
    <div th:if="${param.error}" th:text="#{message.regError}"></div>
    <div th:if="${param.sent}" th:text="#{message.regSucc}"></div>

    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
      <input class="mdl-textfield__input" type="email" name="email" id="email" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" minlength=5 required/>
      <label class="mdl-textfield__label" for="email" th:text="#{label.user.email}"></label>
    </div>

    <br>

    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
      <input class="mdl-textfield__input" type="text" name="firstName" id="firstName" minlength=2 required/>
      <label class="mdl-textfield__label" for="firstName" th:text="#{label.user.firstName}"></label>
    </div>

    <br>

    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
      <input class="mdl-textfield__input" type="text" name="lastName" id="lastName" minlength=2 required/>
      <label class="mdl-textfield__label" for="lastName" th:text="#{label.user.lastName}"></label>
    </div>

    <br>

    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="fieldPassword">
      <input class="mdl-textfield__input" type="password" name="password" id="password" minlength=3 required/>
      <label class="mdl-textfield__label" for="password" th:text="#{label.user.password}"></label>
    </div>

    <br>

    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="fieldMatchPassword">
      <input class="mdl-textfield__input" type="password" name="matchPassword" id="matchPassword" minlength=3 required/>
      <label class="mdl-textfield__label" for="matchPassword"  th:text="#{label.user.confirmPass}"></label>
    </div>

    <br>

    <div style="text-align: center">
      <input class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit" th:value="#{label.form.submit}"/>
      <a href="login.html" th:href="@{/login}" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--accent" th:text="#{label.form.login}"></a>
    </div>

  </form>

  <div class="mdl-layout-spacer"></div>
</div>
</body>

<script>
    var password = document.getElementById("password");
    var matchPassword = document.getElementById("matchPassword");

    function validatePassword(){
        if(password.value !== matchPassword.value && matchPassword.value!=='') {
            matchPassword.setCustomValidity("Passwords Don't Match");
            $("#fieldPassword").addClass('is-invalid');
            $("#fieldMatchPassword").addClass('is-invalid');
            return false;
        } else {
            matchPassword.setCustomValidity('');
            $("#fieldPassword").removeClass('is-invalid');
            $("#fieldMatchPassword").removeClass('is-invalid');
            return true;
        }
    }

    password.onchange = validatePassword;
    matchPassword.onkeyup = validatePassword;
</script>
<script>
    $(document).ready(function() {
        $("div").removeClass('is-invalid');
    });
</script>
</html>